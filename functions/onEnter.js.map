{"version":3,"sources":["../../src/functions/onEnter.js"],"names":["onEnter","node","inTransition","entryTrigger","entryProps","exitProps","triggerResolve","pathname","preventScrollJump","hash","locationKey","delay","appearAfter","e","storage","Object","keys","sessionStorage","items","forEach","item","split","length","includes","push","sortedArray","sort","a","b","lastScrolledArr","lastScrolledKey","join","lastScrolled","JSON","parse","getItem","position","window","scrollTo","trigger","removed","entryPropsTrimmed","timeout","visiblePromise","Promise","resolve","entry","visible","exit"],"mappings":";;;;;AAAA;;AAEA,MAAMA,OAAO,GAAG,CAAC;AAChBC,EAAAA,IADgB;AAEhBC,EAAAA,YAFgB;AAGhBC,EAAAA,YAHgB;AAIhBC,EAAAA,UAJgB;AAKhBC,EAAAA,SALgB;AAMhBC,EAAAA,cANgB;AAOhBC,EAAAA,QAPgB;AAQhBC,EAAAA,iBARgB;AAShBC,EAAAA,IATgB;AAUhBC,EAAAA,WAVgB;AAWhBN,EAAAA,UAAU,EAAE;AAAEO,IAAAA,KAAK,GAAG;AAAV,GAXI;AAYhBC,EAAAA,WAAW,GAAG,CAZE;AAahBC,EAAAA;AAbgB,CAAD,KAcV;AACJ,8CAAW,MAAM;AACf,UAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYC,cAAZ,CAAhB;AACA,UAAMC,KAAK,GAAG,EAAd;AAEAJ,IAAAA,OAAO,CAACK,OAAR,CAAiBC,IAAD,IAAU;AACxBC,MAAAA,KAAK,GAAGD,IAAI,CAACC,KAAL,CAAW,GAAX,CAAR;;AACA,UAAGA,KAAK,CAACC,MAAN,GAAe,CAAlB,EAAoB;AAClB,YAAGD,KAAK,CAAC,CAAD,CAAL,KAAa,UAAb,IAA2BA,KAAK,CAAC,CAAD,CAAL,KAAad,QAAxC,IAAoDA,QAAQ,CAACgB,QAAT,CAAkB,OAAlB,MAA+B,KAAtF,EAA6F;AAC3FL,UAAAA,KAAK,CAACM,IAAN,CAAWH,KAAX;AACD;AACF;AACF,KAPD;;AAQA,QAAGH,KAAK,CAACI,MAAN,GAAe,CAAlB,EAAqB;AACnB,YAAMG,WAAW,GAAGP,KAAK,CAACQ,IAAN,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC5C,eAAOA,CAAC,CAAC,CAAD,CAAD,GAAOD,CAAC,CAAC,CAAD,CAAf;AACD,OAFmB,CAApB;AAGA,YAAME,eAAe,GAAGJ,WAAW,CAAC,CAAD,CAAnC;AACA,YAAMK,eAAe,GAAGD,eAAe,CAACE,IAAhB,CAAqB,GAArB,CAAxB;AACA,YAAMC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWjB,cAAc,CAACkB,OAAf,CAAuBL,eAAvB,CAAX,CAArB;AACA,YAAMM,QAAQ,GAAG,CAAC,CAAD,EAAIJ,YAAJ,CAAjB;AACA,kDAAW,MAAM;AACfK,QAAAA,MAAM,CAACC,QAAP,CAAgB,GAAGF,QAAnB;AACD,OAFD,EAEG,CAFH;AAGD;AACF,GAxBD;AA0BD,MAAI,CAAClC,YAAL,EAAmB;AAEnB,QAAM;AAAEqC,IAAAA,OAAO,EAAEC,OAAX;AAAoB,OAAGC;AAAvB,MAA6CrC,UAAnD;AAEA,QAAMsC,OAAO,GAAG9B,WAAW,GAAGD,KAA9B;AAEA,QAAMgC,cAAc,GAAG,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC7C,gDAAW,MAAMA,OAAO,EAAxB,EAA4BH,OAA5B;AACA,GAFsB,CAAvB;AAIApC,EAAAA,cAAc,CAACwC,KAAf,CAAqB,EACpB,GAAGL,iBADiB;AAEpBM,IAAAA,OAAO,EAAEJ,cAFW;AAGpB1C,IAAAA;AAHoB,GAArB;AAMAE,EAAAA,YAAY,IACX,OAAOA,YAAP,KAAwB,UADzB,IAECA,YAAY,CAAC;AACZ2C,IAAAA,KAAK,EAAE1C,UADK;AAEZ4C,IAAAA,IAAI,EAAE3C,SAFM;AAGZJ,IAAAA,IAHY;AAIZY,IAAAA;AAJY,GAAD,CAFb;AAQA,CAjED","sourcesContent":["import { setTimeout } from 'requestanimationframe-timer'\n\nconst onEnter = ({\n\tnode,\n\tinTransition,\n\tentryTrigger,\n\tentryProps,\n\texitProps,\n\ttriggerResolve,\n\tpathname,\n\tpreventScrollJump,\n\thash,\n\tlocationKey,\n\tentryProps: { delay = 0 },\n\tappearAfter = 0,\n\te,\n}) => {\n  setTimeout(() => {\n    const storage = Object.keys(sessionStorage);\n    const items = [];\n\n    storage.forEach((item) => {\n      split = item.split('|');\n      if(split.length > 0){\n        if(split[0] === \"@@scroll\" && split[1] === pathname && pathname.includes('event') === false) {\n          items.push(split);\n        }\n      }\n    });\n    if(items.length > 0) {\n      const sortedArray = items.sort(function(a, b) {\n        return b[2] - a[2];\n      });\n      const lastScrolledArr = sortedArray[0];\n      const lastScrolledKey = lastScrolledArr.join(\"|\");\n      const lastScrolled = JSON.parse(sessionStorage.getItem(lastScrolledKey));\n      const position = [0, lastScrolled];\n      setTimeout(() => {\n        window.scrollTo(...position);\n      }, 0);\n    }\n  })\n\n\tif (!inTransition) return\n\n\tconst { trigger: removed, ...entryPropsTrimmed } = entryProps\n\n\tconst timeout = appearAfter + delay\n\n\tconst visiblePromise = new Promise(resolve => {\n\t\tsetTimeout(() => resolve(), timeout)\n\t})\n\n\ttriggerResolve.entry({\n\t\t...entryPropsTrimmed,\n\t\tvisible: visiblePromise,\n\t\tnode,\n\t})\n\n\tentryTrigger &&\n\t\ttypeof entryTrigger === 'function' &&\n\t\tentryTrigger({\n\t\t\tentry: entryProps,\n\t\t\texit: exitProps,\n\t\t\tnode,\n\t\t\te,\n\t\t})\n}\n\nexport { onEnter }\n"],"file":"onEnter.js"}